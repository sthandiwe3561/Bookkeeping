{% extends "bookkeeping/layout.html" %} 
{% block body %}
<div class="customers">
<h1>Customers Management</h1>
<div class="form-container">
  {% if error %}
  <div class="alert alert-danger">{{ error }}</div>
{% endif %}
{% if success %}
  <div class="alert alert-success">{{ success }}</div>
{% endif %}
<form action="" method="POST">
  {% csrf_token %}

  <div class="form-group mt-2">
    <label>Full Name:</label>
    <input type="text" id="name" name="name" placeholder="Full Name"
           value="{{ post.name|default:'' }}" />
  </div>

  <div class="form-group mt-2">
    <label>Email:</label>
    <input type="text" id="email" name="email" placeholder="Email"
           value="{{ post.email|default:'' }}" />
  </div>

  <div class="form-group mt-2">
    <label>Phone Number:</label>
    <input type="tel" id="phoneNo" name="phoneNo" placeholder="Phone Number"
           value="{{ post.phone_no|default:'' }}" />
  </div>

  <div class="form-group mt-2">
    <label>Estate Name:</label>
    <input type="text" id="estate" name="estate" placeholder="Estate"
           value="{{ post.estate|default:'' }}" />
  </div>

  <div class="form-group mt-2">
    <label>Plot No:</label>
    <input type="number" id="plot" name="plot" placeholder="Plot Number"
           value="{{ post.plot_no|default:'' }}" />
  </div>

  <button type="submit" class="btn submit-btn">
    {% if post %}Update{% else %}Add{% endif %}
  </button>
</form>
</div>

<div class="nameList">
  <div class="customersList row">
    
    <!-- Sidebar List of Customer Names -->
    <div class="names col-3" style="max-height: 500px; overflow-y: auto;">
      <ul>
        {% for names in customers %}
          <li>
            <a href="{% url 'customer_details' names.id %}">
              <p>{{ names.name }}</p>
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>

    <!-- Selected Customer Details -->
    <div class="details col-6">
      {% if customer_details %}
        <ul>
          <li>{{ customer_details.email }}</li>
          <li>{{ customer_details.phone_no }}</li>
          <li>{{ customer_details.estate }}</li>
          <li>{{ customer_details.plot_no }}</li>
        </ul>

        <a href="{% url 'customer_delete' customer_details.id %}" class="btn btn-outline-primary">Delete</a>
        <a href="{% url 'customer_form_edit' customer_details.id %}" class="btn btn-outline-primary">Edit</a>
      {% else %}
        <p>Select a customer to view details.</p>
      {% endif %}
    </div>

  </div>
</div>

 
{% endblock %}